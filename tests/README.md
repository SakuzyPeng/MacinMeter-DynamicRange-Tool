# æµ‹è¯•å›ºä»¶å’Œè¾¹ç•Œæµ‹è¯•

## ğŸ“‹ æ¦‚è¿°

æœ¬ç›®å½•åŒ…å«éŸ³é¢‘DRåˆ†æå™¨çš„è¾¹ç•Œå’Œå¼‚å¸¸æµ‹è¯•ï¼ŒéªŒè¯å„ç§è¾¹ç•Œæ¡ä»¶ã€å¼‚å¸¸è¾“å…¥å’Œæ•°å€¼è¾¹ç•Œçš„å¤„ç†ã€‚

## ğŸµ æµ‹è¯•æ–‡ä»¶ç»“æ„

```
tests/
â”œâ”€â”€ audio_test_fixtures.rs  # æµ‹è¯•å›ºä»¶ç”Ÿæˆå™¨ï¼ˆç”Ÿæˆå„ç§ç‰¹æ®ŠéŸ³é¢‘æ–‡ä»¶ï¼‰
â”œâ”€â”€ boundary_tests.rs        # è¾¹ç•Œå’Œå¼‚å¸¸æµ‹è¯•
â”œâ”€â”€ fixtures/                # è‡ªåŠ¨ç”Ÿæˆçš„æµ‹è¯•æ–‡ä»¶ç›®å½•
â””â”€â”€ README.md               # æœ¬æ–‡ä»¶
```

## ğŸš€ è¿è¡Œæµ‹è¯•

### è¿è¡Œæ‰€æœ‰è¾¹ç•Œæµ‹è¯•
```bash
cargo test --test boundary_tests
```

### è¿è¡Œå•ä¸ªæµ‹è¯•
```bash
# æµ‹è¯•é™éŸ³å¤„ç†
cargo test --test boundary_tests test_silence_handling -- --show-output

# æµ‹è¯•ç©ºæ–‡ä»¶
cargo test --test boundary_tests test_empty_file -- --show-output

# æµ‹è¯•é«˜é‡‡æ ·ç‡
cargo test --test boundary_tests test_high_sample_rate -- --show-output
```

### è¿è¡Œå‹åŠ›æµ‹è¯•ï¼ˆæ‰‹åŠ¨ï¼‰
```bash
cargo test --test boundary_tests --ignored
```

## ğŸ¯ æµ‹è¯•è¦†ç›–èŒƒå›´

### 1. è¾¹ç•Œæ¡ä»¶æµ‹è¯•ï¼ˆ3ä¸ªï¼‰
- âœ… **é›¶é•¿åº¦éŸ³é¢‘**ï¼š0ä¸ªæ ·æœ¬ï¼Œåªæœ‰å¤´éƒ¨
- âœ… **å•é‡‡æ ·ç‚¹**ï¼šä»…1ä¸ªæ ·æœ¬çš„éŸ³é¢‘
- âœ… **æçŸ­éŸ³é¢‘**ï¼š10msï¼ˆ441ä¸ªæ ·æœ¬ï¼‰

### 2. æ•°å€¼è¾¹ç•Œæµ‹è¯•ï¼ˆ3ä¸ªï¼‰
- âœ… **é™éŸ³æ–‡ä»¶**ï¼šå…¨0æ ·æœ¬ï¼Œæµ‹è¯•RMS=0æƒ…å†µ
- âœ… **å…¨å‰Šæ³¢**ï¼šæ»¡åˆ»åº¦æ–¹æ³¢ï¼Œæå°åŠ¨æ€èŒƒå›´
- âœ… **è¾¹ç¼˜å€¼**ï¼šæœ€å¤§/æœ€å°/é›¶å€¼æ··åˆæ¨¡å¼

### 3. æ ¼å¼è¾¹ç•Œæµ‹è¯•ï¼ˆ2ä¸ªï¼‰
- âœ… **é«˜é‡‡æ ·ç‡**ï¼š192kHz, 24bit
- âœ… **3å£°é“æ‹’ç»**ï¼šéªŒè¯å¤šå£°é“æ‹’ç»é€»è¾‘

### 4. å¼‚å¸¸æ–‡ä»¶æµ‹è¯•ï¼ˆ3ä¸ªï¼‰
- âœ… **ç©ºæ–‡ä»¶**ï¼š0å­—èŠ‚æ–‡ä»¶
- âœ… **ä¼ªè£…æ–‡ä»¶**ï¼šæ–‡æœ¬æ–‡ä»¶ä¼ªè£…æˆWAV
- âœ… **æˆªæ–­æ–‡ä»¶**ï¼šå¤´éƒ¨æ­£å¸¸ä½†æ•°æ®ä¸å®Œæ•´

### 5. å‹åŠ›æµ‹è¯•ï¼ˆ1ä¸ªï¼Œignoreï¼‰
- âœ… **è¿ç»­å¤„ç†**ï¼šæ‰¹é‡å¤„ç†å¤šä¸ªæµ‹è¯•æ–‡ä»¶

## ğŸ“¦ ç”Ÿæˆçš„æµ‹è¯•å›ºä»¶

è¿è¡Œæµ‹è¯•æ—¶ä¼šè‡ªåŠ¨ç”Ÿæˆä»¥ä¸‹æ–‡ä»¶åˆ° `tests/fixtures/`:

| æ–‡ä»¶å | ç±»å‹ | ç”¨é€” |
|--------|------|------|
| `zero_length.wav` | 0æ ·æœ¬ | æµ‹è¯•ç©ºéŸ³é¢‘å¤„ç† |
| `single_sample.wav` | 1æ ·æœ¬ | æµ‹è¯•æå°æ ·æœ¬é‡ |
| `tiny_duration.wav` | 10ms | æµ‹è¯•æçŸ­éŸ³é¢‘ |
| `silence.wav` | 1ç§’é™éŸ³ | æµ‹è¯•å…¨0æ ·æœ¬ |
| `full_scale_clipping.wav` | æ–¹æ³¢ | æµ‹è¯•å‰Šæ³¢ |
| `edge_cases.wav` | è¾¹ç¼˜å€¼ | æµ‹è¯•æ•°å€¼è¾¹ç•Œ |
| `high_sample_rate.wav` | 192kHz/24bit | æµ‹è¯•é«˜è§„æ ¼ |
| `3_channels.wav` | 3å£°é“ | æµ‹è¯•æ‹’ç»é€»è¾‘ |
| `empty.wav` | 0å­—èŠ‚ | æµ‹è¯•ç©ºæ–‡ä»¶ |
| `fake_audio.wav` | æ–‡æœ¬ | æµ‹è¯•ä¼ªè£…æ–‡ä»¶ |
| `truncated.wav` | æˆªæ–­ | æµ‹è¯•æŸåæ–‡ä»¶ |

## ğŸ”¬ æµ‹è¯•ç»“æœç¤ºä¾‹

```bash
$ cargo test --test boundary_tests

running 12 tests
test test_zero_length_audio ... ok
test test_single_sample_audio ... ok
test test_tiny_duration_audio ... ok
test test_silence_handling ... ok
test test_full_scale_clipping ... ok
test test_edge_value_patterns ... ok
test test_high_sample_rate ... ok
test test_3_channels_rejection ... ok
test test_empty_file ... ok
test test_fake_audio_file ... ok
test test_truncated_wav ... ok
test audio_test_fixtures::tests::test_fixture_generation ... ok

test result: ok. 12 passed; 0 failed; 1 ignored; 0 measured
```

## ğŸ› ï¸ è‡ªå®šä¹‰æµ‹è¯•å›ºä»¶

å¦‚æœéœ€è¦ç”Ÿæˆè‡ªå®šä¹‰æµ‹è¯•æ–‡ä»¶ï¼š

```rust
use audio_test_fixtures::AudioTestFixtures;

let fixtures = AudioTestFixtures::new();

// ç”Ÿæˆæ‰€æœ‰å›ºä»¶
fixtures.generate_all();

// æˆ–ç”Ÿæˆå•ä¸ªå›ºä»¶
let path = fixtures.create_silence();
println!("ç”Ÿæˆé™éŸ³æ–‡ä»¶: {:?}", path);
```

## ğŸ“ æµ‹è¯•ç»´æŠ¤

### æ·»åŠ æ–°æµ‹è¯•
1. åœ¨ `audio_test_fixtures.rs` æ·»åŠ å›ºä»¶ç”Ÿæˆæ–¹æ³•
2. åœ¨ `boundary_tests.rs` æ·»åŠ æµ‹è¯•å‡½æ•°
3. ä½¿ç”¨ `#[test]` æ ‡è®°æ™®é€šæµ‹è¯•ï¼Œ`#[test] #[ignore]` æ ‡è®°å‹åŠ›æµ‹è¯•

### æ¸…ç†æµ‹è¯•æ–‡ä»¶
æµ‹è¯•å›ºä»¶ä¼šè‡ªåŠ¨ä¿ç•™åœ¨ `tests/fixtures/`ï¼Œæ–¹ä¾¿æ‰‹åŠ¨éªŒè¯ã€‚
å¦‚éœ€æ¸…ç†ï¼š
```bash
rm -rf tests/fixtures/
```

## ğŸ“ æµ‹è¯•å“²å­¦

è¿™äº›æµ‹è¯•éµå¾ª"è¾¹ç•Œä¼˜å…ˆ"åŸåˆ™ï¼š
- **è¾¹ç•Œå€¼æµ‹è¯•**ï¼šéªŒè¯æç«¯è¾“å…¥ï¼ˆ0æ ·æœ¬ã€æ»¡åˆ»åº¦ç­‰ï¼‰
- **å¼‚å¸¸è¾“å…¥æµ‹è¯•**ï¼šéªŒè¯é”™è¯¯å¤„ç†ï¼ˆæŸåæ–‡ä»¶ã€ä¼ªè£…æ–‡ä»¶ç­‰ï¼‰
- **å›å½’æµ‹è¯•**ï¼šé˜²æ­¢ä¿®æ”¹ç ´åå·²æœ‰åŠŸèƒ½

**æµ‹è¯•ç›®æ ‡**ï¼šç¡®ä¿å·¥å…·åœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½èƒ½ä¼˜é›…åœ°å¤„ç†è¾“å…¥ï¼Œä¸ä¼španicæˆ–äº§ç”Ÿä¸å¯é¢„æœŸçš„è¡Œä¸ºã€‚

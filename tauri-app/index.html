<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="/src/styles.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MacinMeter DR GUI</title>
    <script type="module" src="/src/main.ts" defer></script>
  </head>

  <body>
    <main class="app">
      <section class="panel">
        <h2>文件选择 / 分析</h2>
        <div class="path-row">
          <input
            type="text"
            id="input-path"
            placeholder="尚未选择音频文件"
            readonly
          />
          <div class="path-actions">
            <button id="pick-file" type="button">选择文件</button>
            <button id="scan-dir" type="button">选择目录</button>
            <button id="deep-scan-dir" type="button" class="ghost danger">
              深度扫描目录
            </button>
            <button id="clear-path" type="button" class="ghost">清除</button>
            <button id="analyze-btn" type="button">开始分析</button>
          </div>
        </div>
        <div class="custom-ffmpeg">
          <input
            type="text"
            id="ffmpeg-path"
            placeholder="自定义 ffmpeg 路径（留空 = 使用默认）"
          />
          <button type="button" id="apply-ffmpeg">应用 FFmpeg 路径</button>
        </div>
        <div id="scan-results" class="scan-results hidden"></div>
      </section>

      <section class="panel">
        <h2>分析结果</h2>
        <div class="result-options">
          <div class="copy-actions">
            <button id="result-exclude-lfe-btn" type="button" class="copy-btn toggle-btn">排除 LFE</button>
            <button id="export-hide-path-btn" type="button" class="copy-btn toggle-btn">隐藏路径</button>
            <button id="copy-md" type="button" class="copy-btn" disabled>Copy MD</button>
            <button id="copy-json" type="button" class="copy-btn" disabled>Export JSON</button>
            <button id="export-image" type="button" class="copy-btn" disabled>Export Image</button>
            <select id="sort-mode" class="sort-select" disabled>
              <option value="none">原顺序</option>
              <option value="dr-asc">DR 精细值 ↑</option>
              <option value="dr-desc">DR 精细值 ↓</option>
            </select>
            <div class="search-actions">
              <input
                type="text"
                id="result-search"
                placeholder="搜索文件名/路径"
                autocomplete="off"
              />
              <button id="result-search-next" type="button" class="copy-btn" disabled>跳转</button>
            </div>
          </div>
        </div>
        <div id="single-analysis" class="analysis-panel">
          <div id="status" class="status">请选择音频文件后运行分析。</div>
          <div id="dr-table"></div>
          <div id="warnings"></div>
          <div id="trim-report"></div>
          <div id="silence-report"></div>
        </div>
        <div id="directory-results" class="directory-results"></div>
      </section>

    </main>
  </body>
</html>

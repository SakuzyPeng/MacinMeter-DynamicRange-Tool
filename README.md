# MacinMeter DR Tool (foobar2000å…¼å®¹ç‰ˆ)

![Rust](https://img.shields.io/badge/rust-%23000000.svg?style=for-the-badge&logo=rust&logoColor=white)
![License](https://img.shields.io/badge/license-MIT-blue.svg?style=for-the-badge)

**åŸºäºfoobar2000 DR Meterçš„Rustè¡ç”Ÿå®ç°**

*è‡´æ•¬Janne HyvÃ¤rinençš„å¼€åˆ›æ€§å·¥ä½œ*

ä¸€ä¸ªåŸºäºfoobar2000 DR Meterç®—æ³•é€»è¾‘æ·±å…¥ç ”ç©¶çš„é«˜æ€§èƒ½éŸ³é¢‘åŠ¨æ€èŒƒå›´(DR)æµ‹é‡å·¥å…·è¡ç”Ÿå®ç°ï¼Œä½¿ç”¨Rustè¯­è¨€é‡æ–°æ„å»ºï¼Œæ—¨åœ¨ä¸ºè·¨å¹³å°ç¯å¢ƒæä¾›é«˜ç²¾åº¦çš„DRåˆ†æèƒ½åŠ›ã€‚

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯foobar2000 DR Meteræ’ä»¶çš„è¡ç”Ÿå®ç°ï¼ŒåŸºäºå¯¹åŸå§‹ç®—æ³•çš„æ·±å…¥å­¦ä¹ å’Œç†è§£ã€‚æˆ‘ä»¬é€šè¿‡é€†å‘å·¥ç¨‹ç ”ç©¶äº†Janne HyvÃ¤rinenåˆ›ä½œçš„åŸå§‹ç®—æ³•é€»è¾‘ï¼Œå¹¶å°†å…¶ç²¾ç¥å’ŒåŸç†ç§»æ¤åˆ°Rustè¯­è¨€å®ç°ä¸­ï¼Œä»¥ä¾¿ä¸ºæ›´å¹¿æ³›çš„å¹³å°å’Œç”¨æˆ·ç¾¤ä½“æä¾›æœåŠ¡ã€‚

### âœ¨ è¡ç”Ÿå®ç°ç‰¹æ€§

- **ğŸŒ¿ è‡´æ•¬åŸåˆ›**: å¿ å®ä¼ æ‰¿foobar2000 DR Meterçš„æ ¸å¿ƒç®—æ³•ç²¾ç¥
- **ğŸ¯ é«˜ç²¾åº¦å®ç°**: Peakæ£€æµ‹100%ç²¾ç¡®ï¼ŒDRåˆ†ç±»é«˜åº¦å‡†ç¡®
- **ğŸµ å¤šæ ¼å¼æ”¯æŒ**: WAV, FLAC, MP3, AAC, OGGç­‰ä¸»æµéŸ³é¢‘æ ¼å¼
- **ğŸš€ ç°ä»£åŒ–ä¼˜åŒ–**: Rustè¯­è¨€é‡æ„ï¼ŒSIMDå‘é‡åŒ–ï¼Œå¤šçº¿ç¨‹å¹¶è¡Œ
- **ğŸ”§ è·¨å¹³å°æ‰©å±•**: å°†åŸæœ¬Windowsä¸“æœ‰çš„åŠŸèƒ½æ‰©å±•è‡³Linuxã€macOS
- **âš¡ ç®—æ³•ä¼ æ‰¿**: ä¿æŒSum Doublingã€åŒPeakå›é€€ç­‰åŸå§‹è®¾è®¡ç†å¿µ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ„å»º

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/SakuzyPeng/MacinMeter-DynamicRange-Tool.git
cd MacinMeter-DynamicRange-Tool

# åˆ‡æ¢åˆ°foobar2000å…¼å®¹åˆ†æ”¯
git checkout early-version

# æ„å»ºreleaseç‰ˆæœ¬
cargo build --release
```

### åŸºæœ¬ä½¿ç”¨

```bash
# åˆ†æå•ä¸ªæ–‡ä»¶
./target/release/MacinMeter-DynamicRange-Tool-foo_dr audio.flac

# è¯¦ç»†è¾“å‡º
./target/release/MacinMeter-DynamicRange-Tool-foo_dr --verbose audio.wav

# å¯ç”¨Sum Doublingè¡¥å¿
./target/release/MacinMeter-DynamicRange-Tool-foo_dr --sum-doubling audio.mp3

# ä¿å­˜ç»“æœåˆ°æ–‡ä»¶
./target/release/MacinMeter-DynamicRange-Tool-foo_dr --output result.txt audio.flac
```

### Macç”¨æˆ·ä¾¿åˆ©è·¯å¾„

```bash
# Releaseç‰ˆæœ¬ (æ¨è)
/Users/Sakuzy/code/rust/MacinMeter-DynamicRange-Tool/target/release/MacinMeter-DynamicRange-Tool-foo_dr

# Debugç‰ˆæœ¬ (å¼€å‘ç”¨)  
/Users/Sakuzy/code/rust/MacinMeter-DynamicRange-Tool/target/debug/MacinMeter-DynamicRange-Tool-foo_dr
```

## ğŸ“‹ å‘½ä»¤è¡Œé€‰é¡¹

```bash
é€‰é¡¹:
  -s, --sum-doubling   å¯ç”¨Sum Doublingè¡¥å¿ï¼ˆäº¤é”™æ•°æ®ï¼‰
  -v, --verbose        æ˜¾ç¤ºè¯¦ç»†å¤„ç†ä¿¡æ¯
  -o, --output <FILE>  è¾“å‡ºç»“æœåˆ°æ–‡ä»¶
      --disable-simd   ç¦ç”¨SIMDå‘é‡åŒ–ä¼˜åŒ–
      --single-thread  ç¦ç”¨å¤šçº¿ç¨‹å¤„ç†
  -h, --help           æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
  -V, --version        æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
```

## ğŸ”¬ æŠ€æœ¯å®ç°è¯´æ˜

### é€†å‘å·¥ç¨‹æ–¹æ³•

**ç ”ç©¶å·¥å…·**: IDA Pro ä¸“ä¸šåæ±‡ç¼–åˆ†æ
- **åˆ†æç›®çš„**: ç†è§£foobar2000 DR Meterçš„ç®—æ³•é€»è¾‘å’Œæ•°å­¦å…¬å¼  
- **åˆ†æèŒƒå›´**: ä»…ç ”ç©¶ç®—æ³•è¡Œä¸ºï¼Œæœªå¤åˆ¶ä»»ä½•åŸå§‹æºä»£ç 
- **å®ç°æ–¹å¼**: åŸºäºç®—æ³•ç†è§£çš„å®Œå…¨ç‹¬ç«‹Rustå®ç°

### ç‹¬ç«‹å®ç°åŸåˆ™

- **ğŸ¦€ ç¼–ç¨‹è¯­è¨€**: å®Œå…¨ä½¿ç”¨Rusté‡æ–°ç¼–å†™ï¼ˆåŸç‰ˆä¸ºC++ï¼‰
- **ğŸ—ï¸ æ¶æ„è®¾è®¡**: ç‹¬ç«‹çš„æ¨¡å—åŒ–è®¾è®¡å’Œä»£ç ç»“æ„
- **ğŸ“ ç®—æ³•å®ç°**: åŸºäºæ•°å­¦å…¬å¼çš„åŸåˆ›å®ç°
- **ğŸ” éªŒè¯æ–¹æ³•**: é€šè¿‡è¾“å…¥/è¾“å‡ºå¯¹æ¯”éªŒè¯ç®—æ³•æ­£ç¡®æ€§

### æ ¸å¿ƒç®—æ³•

- **DRè®¡ç®—å…¬å¼**: `DR = -20 Ã— logâ‚â‚€(RMS_20% / Peak_2nd)`
- **24å­—èŠ‚ChannelDataç»“æ„**: 8å­—èŠ‚RMSç´¯ç§¯ + 8å­—èŠ‚ä¸»Peak + 8å­—èŠ‚æ¬¡Peak
- **Sum Doublingæœºåˆ¶**: ä¸“ä¸ºäº¤é”™éŸ³é¢‘æ•°æ®è®¾è®¡çš„2å€RMSä¿®æ­£ç®—æ³•  
- **åŒPeakå›é€€ç³»ç»Ÿ**: ä¸»Peakå¤±æ•ˆæ—¶æ™ºèƒ½åˆ‡æ¢åˆ°æ¬¡Peakçš„å®¹é”™è®¾è®¡

## ğŸ“Š ç²¾åº¦éªŒè¯

ä½¿ç”¨æ ‡å‡†æµ‹è¯•éŸ³é¢‘æ–‡ä»¶éªŒè¯ï¼š
- **æµ‹è¯•æ–‡ä»¶**: `Ver2-adm-master-from-DAW-spatialmix-noreverb-peaklimited-0-2025-08-29-00-00-55.flac`
- **æœŸæœ›ç»“æœ**: DR10 (ä¸foobar2000 DR Meterä¸€è‡´)
- **éªŒè¯çŠ¶æ€**: âœ… Peakæ£€æµ‹100%ç²¾ç¡®ï¼Œå®˜æ–¹DRå€¼é«˜åº¦ä¸€è‡´
- **è¯¦ç»†åˆ†æ**: å‚è§ [`docs/PRECISION_ANALYSIS.md`](docs/PRECISION_ANALYSIS.md)

## ğŸ™ è‡´æ•¬ä¸åˆè§„å£°æ˜

### å¯¹åŸåˆ›å·¥ä½œçš„æ·±æ·±æ•¬æ„
- **åŸä½œè€…**: Janne HyvÃ¤rinen - foobar2000 DR Meteræ’ä»¶çš„åˆ›ä½œè€…
- **å¼€åˆ›æ€§è´¡çŒ®**: DR Meterä¸ºéŸ³é¢‘å·¥ç¨‹é¢†åŸŸå¸¦æ¥äº†æ ‡å‡†åŒ–çš„åŠ¨æ€èŒƒå›´æµ‹é‡æ–¹æ³•
- **æŠ€æœ¯ä¼ æ‰¿**: æœ¬é¡¹ç›®ä½œä¸ºè¡ç”Ÿå®ç°ï¼Œè‡´åŠ›äºä¼ æ‰¿å’Œå‘æ‰¬åŸå§‹ç®—æ³•çš„æŠ€æœ¯ä»·å€¼
- **è·¨å¹³å°ä½¿å‘½**: å°†è¿™ä¸€é‡è¦å·¥å…·çš„ä»·å€¼æ‰©å±•åˆ°æ›´å¤šå¹³å°å’Œç”¨æˆ·ç¾¤ä½“

### è¡ç”Ÿå®ç°åŸåˆ™
- **å­¦ä¹ è‡´æ•¬**: åŸºäºå¯¹åŸå§‹ç®—æ³•æ·±å…¥å­¦ä¹ å’Œç†è§£çš„è¡ç”Ÿå®ç°
- **ç‹¬ç«‹æ„å»º**: æ‰€æœ‰ä»£ç å‡ä¸ºåŸåˆ›Rustå®ç°ï¼Œæœªå¤åˆ¶ä»»ä½•åŸå§‹æºä»£ç 
- **ç®—æ³•ä¼ æ‰¿**: å¿ å®ä¿æŒåŸå§‹ç®—æ³•çš„æ•°å­¦åŸç†å’Œè®¾è®¡ç†å¿µ

### é€†å‘å·¥ç¨‹åˆæ³•æ€§
æ ¹æ®ç›¸å…³æ³•å¾‹åˆ¤ä¾‹ï¼Œä»¥ä¸‹è¡Œä¸ºé€šå¸¸è¢«è®¤ä¸ºæ˜¯åˆæ³•çš„ï¼š
- âœ… ä¸ºäº†äº’æ“ä½œæ€§ç›®çš„çš„é€†å‘åˆ†æ
- âœ… ç†è§£ç®—æ³•é€»è¾‘ç”¨äºç‹¬ç«‹å®ç°  
- âœ… é€šè¿‡åˆæ³•å·¥å…·è¿›è¡ŒæŠ€æœ¯ç ”ç©¶

### é¿å…çš„è¡Œä¸º
æœ¬é¡¹ç›®ä¸¥æ ¼é¿å…ä»¥ä¸‹å¯èƒ½æœ‰äº‰è®®çš„è¡Œä¸ºï¼š
- âŒ ç›´æ¥å¤åˆ¶æˆ–ä½¿ç”¨åŸå§‹æºä»£ç 
- âŒ ä¾µçŠ¯å•†æ ‡æˆ–å“ç‰Œæ ‡è¯†  
- âŒ æ¶æ„å•†ä¸šç«äº‰è¡Œä¸º

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒ

### ä¾èµ–è¦æ±‚
- Rust 1.70+
- æ”¯æŒSIMDçš„CPU (å¯é€‰ï¼Œç”¨äºæ€§èƒ½ä¼˜åŒ–)

### æ„å»ºé…ç½®
```toml
[profile.release]
opt-level = 3
lto = true
codegen-units = 1
panic = "abort"
```

## ğŸ§ª æµ‹è¯•éªŒè¯

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test

# è¿è¡ŒSIMDç²¾åº¦æµ‹è¯•
cargo test --release simd_precision_test

# æ€§èƒ½åŸºå‡†æµ‹è¯•
cargo test --release benchmark
```

## ğŸ“ å¼€å‘è§„èŒƒ

é¡¹ç›®é‡‡ç”¨ä¸¥æ ¼çš„ä»£ç è´¨é‡æ ‡å‡†ï¼š
- **é›¶è­¦å‘ŠåŸåˆ™**: æ‰€æœ‰Clippyè­¦å‘Šå¿…é¡»ä¿®å¤
- **é¢„æäº¤é’©å­**: è‡ªåŠ¨è¿›è¡Œæ ¼å¼ã€ç¼–è¯‘ã€æµ‹è¯•æ£€æŸ¥
- **å®Œæ•´æµ‹è¯•è¦†ç›–**: 75+å•å…ƒæµ‹è¯•è¦†ç›–æ ¸å¿ƒåŠŸèƒ½

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç å’Œå»ºè®®ï¼è¯·æ³¨æ„ï¼š
- éµå¾ªç°æœ‰çš„ä»£ç é£æ ¼å’Œæ¶æ„è®¾è®¡
- ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
- ç»´æŒé«˜ç²¾åº¦å’Œç®—æ³•ä¸€è‡´æ€§

## ğŸ”— ç›¸å…³é“¾æ¥

- **ä¸»çº¿åˆ†æ”¯**: MacinMeter DR Tool æ ‡å‡†ç‰ˆæœ¬
- **å‚è€ƒå®ç°**: foobar2000 DR Meter (foo_dr_meteræ’ä»¶)
- **å®˜æ–¹ä¸»é¡µ**: https://foobar.hyv.fi/?view=foo_dr_meter
- **åŸä½œè€…**: Janne HyvÃ¤rinen

---

## âš ï¸ å…è´£å£°æ˜

æœ¬é¡¹ç›®ä»…ä¾›æŠ€æœ¯ç ”ç©¶å’Œå­¦ä¹ ä½¿ç”¨ã€‚æ‰€æœ‰é€†å‘å·¥ç¨‹æ´»åŠ¨å‡ç¬¦åˆç›¸å…³æ³•å¾‹æ³•è§„ã€‚å¦‚æœ‰æ³•å¾‹ç–‘é—®ï¼Œå»ºè®®å’¨è¯¢ä¸“ä¸šå¾‹å¸ˆã€‚

**ä¸ºä¸“ä¸šéŸ³é¢‘åˆ¶ä½œè€Œç”Ÿ | Built for Professional Audio Production**
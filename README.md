# MacinMeter DR Tool - foobar2000-pluginåˆ†æ”¯

![Rust](https://img.shields.io/badge/rust-%23000000.svg?style=for-the-badge&logo=rust&logoColor=white)
![License](https://img.shields.io/badge/license-MIT-blue.svg?style=for-the-badge)
![Branch](https://img.shields.io/badge/branch-foobar2000--plugin-orange.svg?style=for-the-badge)
![Accuracy](https://img.shields.io/badge/foobar2000_accuracy-100%25-brightgreen.svg?style=for-the-badge)
![Performance](https://img.shields.io/badge/performance_gain-85%25-blue.svg?style=for-the-badge)

**å°è¯•æä¾›æ›´å¥½ä½“éªŒçš„foobar2000å…¼å®¹å®ç°**

*è‡´æ•¬Janne HyvÃ¤rinençš„å¼€åˆ›æ€§å·¥ä½œ*

è¿™æ˜¯MacinMeter DR Toolçš„**foobar2000-pluginåˆ†æ”¯**ï¼Œå­¦ä¹ å¹¶å®ç°äº†foobar2000 DR Meterçš„ç®—æ³•åŸç†ï¼ŒåŠ›æ±‚æä¾›**å‡†ç¡®çš„DRåˆ†æç»“æœ**å’Œ**æ›´å¿«çš„å¤„ç†é€Ÿåº¦**ã€‚é‡‡ç”¨æµå¼æ¶æ„è®¾è®¡ï¼Œå¸Œæœ›èƒ½ä¸ºç”¨æˆ·å¸¦æ¥ä¾¿åˆ©ã€‚

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯foobar2000 DR Meteræ’ä»¶çš„è¡ç”Ÿå®ç°ï¼ŒåŸºäºå¯¹åŸå§‹ç®—æ³•çš„æ·±å…¥å­¦ä¹ å’Œç†è§£ã€‚æˆ‘ä»¬é€šè¿‡é€†å‘å·¥ç¨‹ç ”ç©¶äº†Janne HyvÃ¤rinenåˆ›ä½œçš„åŸå§‹ç®—æ³•é€»è¾‘ï¼Œå¹¶å°†å…¶ç²¾ç¥å’ŒåŸç†ç§»æ¤åˆ°Rustè¯­è¨€å®ç°ä¸­ï¼Œä»¥ä¾¿ä¸ºæ›´å¹¿æ³›çš„å¹³å°å’Œç”¨æˆ·ç¾¤ä½“æä¾›æœåŠ¡ã€‚

### âœ¨ ä¸»è¦ç‰¹æ€§

- **ğŸ¯ ç®—æ³•å‡†ç¡®æ€§**: åœ¨56ä¸ªæµ‹è¯•æ–‡ä»¶ä¸Šä¸foobar2000å®˜æ–¹ç»“æœä¸€è‡´
- **ğŸš€ å¤„ç†é€Ÿåº¦**: åœ¨æµ‹è¯•ä¸­ç›¸æ¯”foobar2000æå‡çº¦85%ï¼ˆå…·ä½“é€Ÿåº¦å–å†³äºæ–‡ä»¶æ ¼å¼å’Œç¡¬ä»¶ï¼‰
- **ğŸŒŠ å¤§æ–‡ä»¶æ”¯æŒ**: æµå¼å¤„ç†è®¾è®¡ï¼Œå†…å­˜å ç”¨è¾ƒå°ä¸”ç›¸å¯¹ç¨³å®š
- **ğŸ“ ä¾¿æ·è¾“å‡º**: å•æ–‡ä»¶/å¤šæ–‡ä»¶è‡ªåŠ¨é€‚åº”ï¼Œç»“æœä¸€ç›®äº†ç„¶
- **ğŸµ æ ¼å¼æ”¯æŒ**: æ”¯æŒFLAC/WAV/MP3/AAC/ALAC/AIFF/OGG/Opusç­‰12+ç§å¸¸è§éŸ³é¢‘æ ¼å¼
- **ğŸŒ å›½é™…åŒ–**: å®Œå–„çš„ä¸­æ—¥è‹±æ–‡ä»¶åæ”¯æŒ
- **âš¡ åŒé‡å¹¶è¡Œ**: æ”¯æŒæ–‡ä»¶çº§å¹¶è¡Œï¼ˆæ‰¹é‡å¤„ç†å¤šä¸ªæ–‡ä»¶ï¼‰å’Œè§£ç çº§å¹¶è¡Œï¼ˆå•ä¸ªæ–‡ä»¶åŠ é€Ÿï¼‰
- **ğŸ”§ å¼€ç®±å³ç”¨**: æ— éœ€å¤æ‚é…ç½®ï¼Œé»˜è®¤æä¾›è¾ƒå¥½çš„æ€§èƒ½è¡¨ç°

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ„å»º

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/SakuzyPeng/MacinMeter-DynamicRange-Tool.git
cd MacinMeter-DynamicRange-Tool

# åˆ‡æ¢åˆ°foobar2000-pluginåˆ†æ”¯
git checkout foobar2000-plugin

# æ„å»ºreleaseç‰ˆæœ¬
cargo build --release
```

### åŸºæœ¬ä½¿ç”¨

```bash
# åˆ†æå•ä¸ªæ–‡ä»¶ï¼ˆé»˜è®¤æ™ºèƒ½ç¼“å†²æµå¼å¤„ç†ï¼‰
./target/release/MacinMeter-DynamicRange-Tool-foo_dr audio.flac

# è¯¦ç»†è¾“å‡ºï¼ˆæ˜¾ç¤ºæµå¼å¤„ç†ç»Ÿè®¡ä¿¡æ¯ï¼‰
./target/release/MacinMeter-DynamicRange-Tool-foo_dr --verbose audio.wav

# æŒ‡å®šè¾“å‡ºæ–‡ä»¶ï¼ˆä¿å­˜ç»“æœåˆ°æŒ‡å®šè·¯å¾„ï¼‰
./target/release/MacinMeter-DynamicRange-Tool-foo_dr --output result.txt audio.flac

# æ‰¹é‡å¤„ç†ç›®å½•
./target/release/MacinMeter-DynamicRange-Tool-foo_dr /path/to/audio/directory
```

### ğŸ“ æ™ºèƒ½è¾“å‡ºç­–ç•¥ (2025-09-27ä¼˜åŒ–)

MacinMeter é‡‡ç”¨æ™ºèƒ½è¾“å‡ºç­–ç•¥ï¼Œæ ¹æ®æ–‡ä»¶æ•°é‡è‡ªåŠ¨ä¼˜åŒ–è¾“å‡ºæ ¼å¼ï¼š

#### ğŸ¯ **å•æ–‡ä»¶å¤„ç†**
```bash
./target/release/MacinMeter-DynamicRange-Tool-foo_dr audio.flac
# è¾“å‡º: audio_DR_Analysis.txt (ä»…ç”Ÿæˆå•ç‹¬ç»“æœæ–‡ä»¶)
```

#### ğŸ“Š **å¤šæ–‡ä»¶æ‰¹é‡å¤„ç†**
```bash
./target/release/MacinMeter-DynamicRange-Tool-foo_dr /audio/directory
# è¾“å‡º: directory_BatchDR_2025-09-27_13-22-30.txt (ä»…ç”Ÿæˆæ‰¹é‡æ±‡æ€»)
```

#### ğŸ“‹ **ä¼˜åŒ–çš„Batchæ ¼å¼**
```
Official DR	Precise DR	æ–‡ä»¶å
--------------------------------------------------------
DR16	16.16 dB	è´å¤šèŠ¬ç¬¬å…«é’¢ç´å¥é¸£æ›²ã€Œæ‚²æ€†ã€.flac
DR15	15.19 dB	æŸ´å¯å¤«æ–¯åŸºç¬¬ä¸€å°æç´åå¥æ›².flac
DR13	13.17 dB	è‚–é‚¦ç¬¬ä¸€é’¢ç´åå¥æ›².flac
```

**ğŸ¯ æ–°æ ¼å¼ä¼˜åŠ¿**:
- âœ… **DRå€¼ç¬¬ä¸€åˆ—**: ä¾¿äºè§†è§‰å¯¹é½å’Œæ¯”è¾ƒ
- âœ… **æ™ºèƒ½æ–‡ä»¶å**: `{ç›®å½•å}_BatchDR_{YYYY-MM-DD_HH-MM-SS}.txt`
- âœ… **åˆ¶è¡¨ç¬¦åˆ†éš”**: å®Œç¾å…¼å®¹Excel/æ–‡æœ¬ç¼–è¾‘å™¨
- âœ… **é¿å…é‡å¤**: å•æ–‡ä»¶ä¸ç”Ÿæˆbatchï¼Œå¤šæ–‡ä»¶ä¸ç”Ÿæˆå•ç‹¬æ–‡ä»¶

### ç¼–è¯‘äº§ç‰©è·¯å¾„

```bash
# Releaseç‰ˆæœ¬ (ç”Ÿäº§ä½¿ç”¨ï¼Œæ¨è)
./target/release/MacinMeter-DynamicRange-Tool-foo_dr

# Debugç‰ˆæœ¬ (å¼€å‘è°ƒè¯•)
./target/debug/MacinMeter-DynamicRange-Tool-foo_dr
```

## ğŸ“‹ å‘½ä»¤è¡Œé€‰é¡¹ (foobar2000-pluginåˆ†æ”¯)

```bash
å‚æ•°:
  [INPUT]              éŸ³é¢‘æ–‡ä»¶æˆ–ç›®å½•è·¯å¾„ï¼ˆå¯é€‰ï¼ŒæœªæŒ‡å®šæ—¶æ‰«æå¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼‰

é€‰é¡¹:
  -v, --verbose               æ˜¾ç¤ºè¯¦ç»†å¤„ç†ä¿¡æ¯ï¼ˆåŒ…æ‹¬æµå¼å¤„ç†ç»Ÿè®¡ï¼‰
  -o, --output <FILE>         è¾“å‡ºç»“æœåˆ°æ–‡ä»¶
  -h, --help                  æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
  -V, --version               æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯

é»˜è®¤è¡Œä¸º:
âœ… æ™ºèƒ½ç¼“å†²æµå¼å¤„ç† - åŒ…çº§è§£ç  + 3ç§’çª—å£çº§ç®—æ³•
âœ… Sum Doublingè¡¥å¿ - è‡ªåŠ¨å¯ç”¨ï¼ŒåŒ¹é…foobar2000è¡Œä¸º
âœ… SIMDå‘é‡åŒ–ä¼˜åŒ– - è‡ªåŠ¨å¯ç”¨ï¼Œæ— é…ç½®é€‰é¡¹
âœ… æ™ºèƒ½è¾“å‡ºç­–ç•¥ - å•æ–‡ä»¶/å¤šæ–‡ä»¶è‡ªé€‚åº”å¤„ç†
```

## ğŸ”¬ æŠ€æœ¯å®ç°è¯´æ˜

### é€†å‘å·¥ç¨‹æ–¹æ³•

**ç ”ç©¶å·¥å…·**: IDA Pro ä¸“ä¸šåæ±‡ç¼–åˆ†æ
- **åˆ†æç›®çš„**: ç†è§£foobar2000 DR Meterçš„ç®—æ³•é€»è¾‘å’Œæ•°å­¦å…¬å¼  
- **åˆ†æèŒƒå›´**: ä»…ç ”ç©¶ç®—æ³•è¡Œä¸ºï¼Œæœªå¤åˆ¶ä»»ä½•åŸå§‹æºä»£ç 
- **å®ç°æ–¹å¼**: åŸºäºç®—æ³•ç†è§£çš„å®Œå…¨ç‹¬ç«‹Rustå®ç°

### ç‹¬ç«‹å®ç°åŸåˆ™

- **ğŸ¦€ ç¼–ç¨‹è¯­è¨€**: å®Œå…¨ä½¿ç”¨Rusté‡æ–°ç¼–å†™ï¼ˆåŸç‰ˆä¸ºC++ï¼‰
- **ğŸ—ï¸ æ¶æ„è®¾è®¡**: ç‹¬ç«‹çš„æ¨¡å—åŒ–è®¾è®¡å’Œä»£ç ç»“æ„
- **ğŸ“ ç®—æ³•å®ç°**: åŸºäºæ•°å­¦å…¬å¼çš„åŸåˆ›å®ç°
- **ğŸ” éªŒè¯æ–¹æ³•**: é€šè¿‡è¾“å…¥/è¾“å‡ºå¯¹æ¯”éªŒè¯ç®—æ³•æ­£ç¡®æ€§

### æ ¸å¿ƒç®—æ³•è¯´æ˜

åŸºäºå¯¹foobar2000 DR Meterç®—æ³•çš„å­¦ä¹ ç†è§£ï¼š

- **DRè®¡ç®—åŸç†**: åŸºäºRMSå’Œå³°å€¼çš„å¯¹æ•°æ¯”å€¼è®¡ç®—
- **æµå¼å¤„ç†**: é‡‡ç”¨è¾¹è¯»è¾¹ç®—çš„æ–¹å¼å¤„ç†éŸ³é¢‘æ•°æ®
- **Sum Doubling**: å‚è€ƒfoobar2000çš„ä¿®æ­£æœºåˆ¶ï¼ˆé»˜è®¤å¯ç”¨ï¼‰
- **å®¹é”™è®¾è®¡**: å¤šé‡å³°å€¼ç³»ç»Ÿæå‡ç®—æ³•ç¨³å®šæ€§

### âš¡ åŒé‡å¹¶è¡ŒåŠ é€Ÿ

ä¸ºäº†æå‡å¤„ç†é€Ÿåº¦ï¼Œæœ¬å·¥å…·å®ç°äº†ä¸¤ä¸ªå±‚é¢çš„å¹¶è¡Œå¤„ç†ï¼š

**1ï¸âƒ£ æ–‡ä»¶çº§å¹¶è¡Œ**: æ‰¹é‡å¤„ç†å¤šä¸ªæ–‡ä»¶æ—¶ï¼Œå¯ä»¥åŒæ—¶åˆ†æå¤šä¸ªéŸ³é¢‘æ–‡ä»¶
**2ï¸âƒ£ è§£ç çº§å¹¶è¡Œ**: å¯¹å•ä¸ªè¾ƒå¤§çš„éŸ³é¢‘æ–‡ä»¶ï¼Œè§£ç è¿‡ç¨‹æœ¬èº«ä¹Ÿèƒ½å¹¶è¡ŒåŠ é€Ÿ

è¿™ä¸¤ä¸ªæœºåˆ¶ç»“åˆèµ·æ¥ï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­èƒ½å¸¦æ¥è¾ƒä¸ºæ˜æ˜¾çš„é€Ÿåº¦æå‡ã€‚å½“ç„¶ï¼Œå…·ä½“çš„æ€§èƒ½è¡¨ç°ä¼šå—åˆ°æ–‡ä»¶æ ¼å¼ã€å¤§å°ã€ç¡¬ä»¶é…ç½®ç­‰å› ç´ å½±å“ã€‚

### ğŸŒŠ æ™ºèƒ½ç¼“å†²æµå¼å¤„ç†ç‰¹æ€§

**æŠ€æœ¯åŸç†**:
```rust
// æ™ºèƒ½ç¼“å†²æµå¼å¤„ç†ï¼šåŒ…çº§è§£ç  + çª—å£çº§ç®—æ³•
while let Some(chunk) = streaming_decoder.next_chunk()? {
    // ç§¯ç´¯chunkåˆ°3ç§’çª—å£ç¼“å†²åŒº
    sample_buffer.extend_from_slice(&chunk);

    // å½“ç§¯ç´¯åˆ°å®Œæ•´çª—å£æ—¶ï¼Œå¤„ç†å¹¶æ¸…ç©ºç¼“å†²åŒº
    while sample_buffer.len() >= window_size_samples {
        process_window_with_simd_separation(&window_samples, ...);
        sample_buffer.drain(0..window_size_samples);
    }
}
```

**æ¶æ„ä¼˜åŠ¿**:
- âœ… **æ’å®šå†…å­˜**: 20MBå›ºå®šä½¿ç”¨ï¼Œä¸æ–‡ä»¶å¤§å°æ— å…³
- âœ… **æµå¼è§£ç **: åŒ…çº§è§£ç é¿å…å…¨é‡åŠ è½½
- âœ… **ç®—æ³•ç²¾åº¦**: 3ç§’æ ‡å‡†çª—å£ä¿æŒ20%é‡‡æ ·ç®—æ³•ç²¾åº¦
- âœ… **SIMDä¼˜åŒ–**: çª—å£çº§SIMDå£°é“åˆ†ç¦»å’Œå‘é‡åŒ–å¤„ç†

## ğŸ† Windowså¹³å°å¯¹æ¯”æµ‹è¯• (2025-09-27)

### ğŸ“Š ä¸foobar2000å®˜æ–¹çš„å¯¹æ¯”ç»“æœ

**æµ‹è¯•ç¯å¢ƒ**: Windowså¹³å°ï¼Œ56ä¸ªFLACæ–‡ä»¶ï¼Œå¤šè¯­è¨€æ··åˆï¼ˆä¸­æ—¥è‹±ï¼‰
**å¯¹æ¯”å·¥å…·**: foobar2000 2.0 + DR Meter 1.1.1 å®˜æ–¹æ’ä»¶

#### âœ… **ç®—æ³•ä¸€è‡´æ€§æµ‹è¯•**

| DRå€¼ | foobar2000 | MacinMeter | æ–‡ä»¶æ•°é‡ | çŠ¶æ€ |
|------|------------|------------|----------|------|
| DR8  | 1ä¸ª        | 1ä¸ª        | 1        | âœ… å®Œå…¨ä¸€è‡´ |
| DR9  | 3ä¸ª        | 3ä¸ª        | 3        | âœ… å®Œå…¨ä¸€è‡´ |
| DR10 | 17ä¸ª       | 17ä¸ª       | 17       | âœ… å®Œå…¨ä¸€è‡´ |
| DR11 | 23ä¸ª       | 23ä¸ª       | 23       | âœ… å®Œå…¨ä¸€è‡´ |
| DR12 | 6ä¸ª        | 6ä¸ª        | 6        | âœ… å®Œå…¨ä¸€è‡´ |
| DR13 | 3ä¸ª        | 3ä¸ª        | 3        | âœ… å®Œå…¨ä¸€è‡´ |
| DR15 | 2ä¸ª        | 2ä¸ª        | 2        | âœ… å®Œå…¨ä¸€è‡´ |
| DR16 | 1ä¸ª        | 1ä¸ª        | 1        | âœ… å®Œå…¨ä¸€è‡´ |

**ğŸ“ˆ æµ‹è¯•ç»“æœ**: 56ä¸ªæ–‡ä»¶çš„DRå€¼ä¸foobar2000ä¿æŒä¸€è‡´

#### ğŸš€ **æ€§èƒ½è¡¨ç°**

| æŒ‡æ ‡ | foobar2000 | MacinMeter | è¯´æ˜ |
|------|------------|------------|------|
| **å¤„ç†æ—¶é—´** | 65ç§’ | 35ç§’ | çº¦å¿«85%ï¼ˆå…·ä½“é€Ÿåº¦å—æ–‡ä»¶æ ¼å¼å½±å“ï¼‰ |
| **å†…å­˜ä½¿ç”¨** | - | ~45MB | ç›¸å¯¹ç¨³å®šçš„å†…å­˜å ç”¨ |
| **æˆåŠŸç‡** | 100% | 100% | ç¨³å®šå¤„ç† |

#### ğŸµ **æµ‹è¯•æ–‡ä»¶è¦†ç›–èŒƒå›´**
- **å¤å…¸éŸ³ä¹**: å¾·æ²ƒå¤å…‹ç¬¬ä¹äº¤å“æ›²ã€è´å¤šèŠ¬æ‚²æ€†å¥é¸£æ›²ã€æŸ´å¯å¤«æ–¯åŸºå°æç´åå¥æ›²
- **ç°ä»£æµè¡Œ**: YOASOBIã€LiSAã€Aimerç­‰çŸ¥åè‰ºæœ¯å®¶ä½œå“
- **åŠ¨æ¼«éŸ³ä¹**: é’¢ä¹‹ç‚¼é‡‘æœ¯å¸ˆã€é­”æ³•å°‘å¥³å°åœ†ã€Fateç³»åˆ—ç­‰
- **ç”µå­éŸ³ä¹**: VOCALOIDä½œå“ã€åˆéŸ³ãƒŸã‚¯ç³»åˆ—
- **å¤šè¯­è¨€**: å®Œç¾æ”¯æŒä¸­æ—¥è‹±æ··åˆæ–‡ä»¶å

#### ğŸ’ **é¡¹ç›®ç‰¹ç‚¹**
- âœ… **è·¨å¹³å°**: Windows/macOS/Linuxç»“æœä¸€è‡´
- âœ… **å¤šæ ¼å¼**: æ”¯æŒFLAC/WAV/MP3/AAC/ALAC/AIFF/OGG/Opusç­‰12+ç§æ ¼å¼
- âœ… **å¤§æ–‡ä»¶å‹å¥½**: æµå¼å¤„ç†è®¾è®¡ï¼Œå†…å­˜å ç”¨ç›¸å¯¹ç¨³å®š
- âœ… **ç¨³å®šæ€§**: åŠ›æ±‚æä¾›å¯é çš„å¤„ç†ä½“éªŒ

### ğŸµ æ”¯æŒçš„éŸ³é¢‘æ ¼å¼

æœ¬å·¥å…·é€šè¿‡ä¼˜ç§€çš„Symphoniaå’ŒSongbirdåº“ï¼Œå°è¯•æ”¯æŒå¸¸è§çš„éŸ³é¢‘æ ¼å¼ï¼š

**æ— æŸæ ¼å¼**: FLAC, ALAC (Apple Lossless), WAV, AIFF
**æœ‰æŸæ ¼å¼**: MP3, AAC, OGG Vorbis, Opus
**å…¶ä»–æ ¼å¼**: MP1 (MPEG Layer I), ä»¥åŠå¤šç§å®¹å™¨æ ¼å¼ (MP4/M4A, MKVç­‰)

**æ€»è®¡**: 12+ç§å¸¸è§éŸ³é¢‘æ ¼å¼ï¼Œå¸Œæœ›èƒ½è¦†ç›–å¤§éƒ¨åˆ†ä½¿ç”¨åœºæ™¯

*æ³¨: MP3æ ¼å¼ç”±äºæŠ€æœ¯ç‰¹æ€§é‡‡ç”¨ä¸²è¡Œè§£ç ï¼Œå…¶ä»–å¤§éƒ¨åˆ†æ ¼å¼æ”¯æŒå¹¶è¡ŒåŠ é€Ÿ*

### ğŸ“‹ æœ€è¿‘æ”¹è¿› (2025-10)

- **ä¿®å¤MP3æ ¼å¼**: è§£å†³äº†å¹¶è¡Œè§£ç å¯¼è‡´çš„æ•°æ®é—®é¢˜ï¼Œç°åœ¨MP3æ–‡ä»¶èƒ½æ­£ç¡®åˆ†æäº†
- **ä¿®å¤AIFFæ ¼å¼**: æ”¹è¿›äº†æ ·æœ¬æ•°æ®å¤„ç†ï¼Œç¡®ä¿AIFFæ–‡ä»¶çš„å‡†ç¡®æ€§
- **ä»£ç è´¨é‡**: æŒç»­æ”¹è¿›ä»£ç è´¨é‡ï¼Œå‡å°‘è­¦å‘Šå’Œæ½œåœ¨é—®é¢˜

## ğŸ™ è‡´æ•¬ä¸åˆè§„å£°æ˜

### ğŸ‰ åŸä½œè€…æˆæƒç¡®è®¤

**2025å¹´9æœˆ8æ—¥**:
- âœ… Janne HyvÃ¤rinenæœ¬äººåŒæ„æˆ‘ä»¬ä½¿ç”¨MITè®¸å¯è¯è¿›è¡Œé¡¹ç›®å¼€å‘
- âœ… åŸä½œè€…ä¸ä»‹æ„æˆ‘ä»¬å¯¹foobar2000 DR Meterè¿›è¡Œå­¦ä¹ ç ”ç©¶
- ğŸ“„ åŸä½œè€…æä¾›äº†DRæµ‹é‡çš„æŠ€æœ¯è§„èŒƒæ–‡æ¡£
- ğŸ”— è§„èŒƒæ–‡æ¡£: [Measuring DR ENv3 (å®˜æ–¹PDF)](https://web.archive.org/web/20131206121248/http://www.dynamicrange.de/sites/default/files/Measuring%20DR%20ENv3.pdf)

éå¸¸æ„Ÿè°¢åŸä½œè€…çš„æ”¯æŒå’Œç†è§£ï¼

### è‡´æ•¬åŸåˆ›ä½œè€…
- **åŸä½œè€…**: Janne HyvÃ¤rinen - foobar2000 DR Meteræ’ä»¶çš„åˆ›ä½œè€…
- **è´¡çŒ®**: DR Meterä¸ºéŸ³é¢‘åŠ¨æ€èŒƒå›´æµ‹é‡æä¾›äº†æ ‡å‡†æ–¹æ³•
- **æœ¬é¡¹ç›®**: å­¦ä¹ åŸç®—æ³•å¹¶ç”¨Rusté‡æ–°å®ç°ï¼Œå¸Œæœ›èƒ½è®©æ›´å¤šå¹³å°çš„ç”¨æˆ·ä½¿ç”¨è¿™ä¸ªå·¥å…·

### å®ç°æ–¹å¼
- **å­¦ä¹ ç†è§£**: é€šè¿‡å­¦ä¹ å’Œç†è§£åŸç®—æ³•çš„åŸç†è¿›è¡Œå®ç°
- **ç‹¬ç«‹ç¼–ç **: æ‰€æœ‰ä»£ç ç”¨Rusté‡æ–°ç¼–å†™ï¼Œæœªå¤åˆ¶åŸå§‹æºä»£ç 
- **éµå¾ªè§„èŒƒ**: å‚è€ƒåŸä½œè€…æä¾›çš„æŠ€æœ¯è§„èŒƒæ–‡æ¡£å®ç°

### é€†å‘å·¥ç¨‹åˆæ³•æ€§
æ ¹æ®ç›¸å…³æ³•å¾‹åˆ¤ä¾‹ï¼Œä»¥ä¸‹è¡Œä¸ºé€šå¸¸è¢«è®¤ä¸ºæ˜¯åˆæ³•çš„ï¼š
- âœ… ä¸ºäº†äº’æ“ä½œæ€§ç›®çš„çš„é€†å‘åˆ†æ
- âœ… ç†è§£ç®—æ³•é€»è¾‘ç”¨äºç‹¬ç«‹å®ç°  
- âœ… é€šè¿‡åˆæ³•å·¥å…·è¿›è¡ŒæŠ€æœ¯ç ”ç©¶

### é¿å…çš„è¡Œä¸º
æœ¬é¡¹ç›®ä¸¥æ ¼é¿å…ä»¥ä¸‹å¯èƒ½æœ‰äº‰è®®çš„è¡Œä¸ºï¼š
- âŒ ç›´æ¥å¤åˆ¶æˆ–ä½¿ç”¨åŸå§‹æºä»£ç 
- âŒ ä¾µçŠ¯å•†æ ‡æˆ–å“ç‰Œæ ‡è¯†  
- âŒ æ¶æ„å•†ä¸šç«äº‰è¡Œä¸º

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒ

### ä¾èµ–è¦æ±‚
- Rust 1.70+
- æ”¯æŒSIMDçš„CPU (å¯é€‰ï¼Œç”¨äºæ€§èƒ½ä¼˜åŒ–)

### æ„å»ºé…ç½®
```toml
[profile.release]
opt-level = 3
lto = true
codegen-units = 1
panic = "abort"
```


## ğŸ“ å¼€å‘è¯´æ˜

é¡¹ç›®éµå¾ªåŸºæœ¬çš„ä»£ç è´¨é‡å®è·µï¼š
- å°½é‡ä¿æŒä»£ç æ•´æ´å’Œå¯è¯»æ€§
- ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·è¿›è¡Œæ ¼å¼æ£€æŸ¥
- ç¼–å†™æµ‹è¯•æ¥éªŒè¯æ ¸å¿ƒåŠŸèƒ½

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ¤ è´¡çŒ®

éå¸¸æ¬¢è¿å„ç§å½¢å¼çš„è´¡çŒ®å’Œå»ºè®®ï¼æ— è®ºæ˜¯ï¼š
- å‘ç°é—®é¢˜å¹¶æå‡ºIssue
- æ”¹è¿›ä»£ç æˆ–æ–‡æ¡£
- åˆ†äº«ä½¿ç”¨ç»éªŒå’Œåé¦ˆ

æˆ‘ä»¬éƒ½éå¸¸æ„Ÿè°¢ã€‚åœ¨æäº¤ä»£ç æ—¶ï¼Œè¯·å°½é‡ä¿æŒç°æœ‰çš„ä»£ç é£æ ¼å³å¯ã€‚

## ğŸŒŠ æ™ºèƒ½ç¼“å†²æµå¼æ¶æ„ (foobar2000-pluginåˆ†æ”¯ç‰¹è‰²)

### ğŸ¯ åŒ…çº§è§£ç  + çª—å£çº§ç®—æ³•çš„æ··åˆè®¾è®¡

æœ¬åˆ†æ”¯é‡‡ç”¨åˆ›æ–°çš„æ··åˆæ¶æ„ï¼Œç»“åˆåŒ…çº§æµå¼è§£ç å’Œçª—å£çº§ç®—æ³•å¤„ç†ï¼š

| å¤„ç†å±‚é¢ | å®ç°æ–¹å¼ | æŠ€æœ¯ä¼˜åŠ¿ | å†…å­˜ç‰¹æ€§ |
|---------|----------|---------|---------|
| **è§£ç å±‚** | åŒ…çº§æµå¼è§£ç  | é¿å…å…¨é‡åŠ è½½ï¼Œæ”¯æŒä»»æ„å¤§å°æ–‡ä»¶ | åŒ…çº§ä¸´æ—¶ç¼“å†² |
| **ç®—æ³•å±‚** | 3ç§’çª—å£å¤„ç† | ä¿æŒ20%é‡‡æ ·ç®—æ³•ç²¾åº¦ | æ’å®š20MBçª—å£ç¼“å†² |
| **æ•´ä½“** | æ™ºèƒ½ç¼“å†²æ··åˆ | âœ… 100%ä¸foobar2000ç®—æ³•å¯¹é½ | æ’å®šå†…å­˜ä½¿ç”¨ |

### ğŸ” è¯¦ç»†å¤„ç†ç»Ÿè®¡

å¯ç”¨`--verbose`æ¨¡å¼å¯æŸ¥çœ‹è¯¦ç»†çš„æµå¼å¤„ç†ç»Ÿè®¡ï¼š

```bash
./target/release/MacinMeter-DynamicRange-Tool-foo_dr --verbose audio.flac

# è¾“å‡ºç¤ºä¾‹ï¼š
ğŸŒŠ æ™ºèƒ½ç¼“å†²æµå¼å¤„ç†ç»Ÿè®¡ï¼š
   æ€»è§£ç chunkæ•°: 2,847
   çª—å£å¤„ç†æ•°: 127ä¸ª (3ç§’/çª—å£)
   ç¼“å†²åŒºå³°å€¼: 600KB (3ç§’çª—å£)
   å¹³å‡chunkå¤§å°: 2,304.5 æ ·æœ¬
   å¤„ç†æ•ˆç‡: 115MB/s

ğŸ¯ ç®—æ³•ç²¾åº¦ä¿è¯ï¼š
   âœ… 3ç§’æ ‡å‡†çª—å£ï¼Œä¿æŒ20%é‡‡æ ·ç²¾åº¦
   âœ… WindowRmsAnalyzeræµå¼å¤„ç†
```

### âš¡ æ¶æ„å±‚æ¬¡è®¾è®¡

#### ğŸŒŠ æ™ºèƒ½ç¼“å†²æµå¼å¤„ç†ï¼ˆå½“å‰å®ç°ï¼‰
```rust
// åŒ…çº§æµå¼è§£ç  + çª—å£çº§ç®—æ³•å¤„ç†
while let Some(chunk) = streaming_decoder.next_chunk()? {
    sample_buffer.extend_from_slice(&chunk);

    while sample_buffer.len() >= window_size_samples {
        // 3ç§’æ ‡å‡†çª—å£å¤„ç†ï¼Œä¿æŒç®—æ³•ç²¾åº¦
        process_window_with_simd_separation(&window_samples, ...);
        sample_buffer.drain(0..window_size_samples);
    }
}
```

**æ ¸å¿ƒç‰¹ç‚¹**:
- âœ… **æµå¼è§£ç **: åŒ…çº§è§£ç é¿å…å…¨é‡å†…å­˜åŠ è½½
- âœ… **ç®—æ³•ç²¾åº¦**: 3ç§’çª—å£ä¿æŒfoobar2000å®Œå…¨å¯¹é½
- âœ… **æ’å®šå†…å­˜**: 20MBå›ºå®šç¼“å†²ï¼Œæ”¯æŒGBçº§æ–‡ä»¶
- âœ… **SIMDä¼˜åŒ–**: çª—å£çº§å‘é‡åŒ–å¤„ç†

### ğŸš€ æµå¼æ¶æ„ä¼˜åŠ¿

**å†…å­˜ç®¡ç†**ï¼š
- **è§£ç å±‚**: åŒ…çº§ä¸´æ—¶ç¼“å†²ï¼ˆKBçº§ï¼‰
- **ç®—æ³•å±‚**: 3ç§’çª—å£ç¼“å†²ï¼ˆ~600KBï¼‰
- **æ€»ä½“**: æ’å®š20MBï¼Œä¸æ–‡ä»¶å¤§å°æ— å…³

**æ€§èƒ½ç‰¹æ€§**ï¼š
- **æ”¯æŒè¶…å¤§æ–‡ä»¶**: DXD/DSDçº§åˆ«çš„é«˜åˆ†è¾¨ç‡éŸ³é¢‘
- **å®æ—¶è¿›åº¦**: è¯¦ç»†çš„å¤„ç†è¿›åº¦å’Œç»Ÿè®¡ä¿¡æ¯
- **é›¶å†…å­˜ç´¯ç§¯**: å¤„ç†å®Œçª—å£ç«‹å³æ¸…ç©ºç¼“å†²

## ğŸš€ åç»­è®¡åˆ’

æˆ‘ä»¬ä¼šæŒç»­æ”¹è¿›è¿™ä¸ªå·¥å…·ï¼Œå¸Œæœ›èƒ½åšå¾—æ›´å¥½ï¼š

- ç»§ç»­ä¼˜åŒ–å¤„ç†é€Ÿåº¦å’Œå†…å­˜ä½¿ç”¨
- å®Œå–„å¯¹æ›´å¤šéŸ³é¢‘æ ¼å¼çš„æ”¯æŒ
- æ”¹è¿›ç”¨æˆ·ä½“éªŒå’Œé”™è¯¯æç¤º
- æ¢ç´¢å¤šå£°é“éŸ³é¢‘çš„æ”¯æŒ

è¯¦ç»†çš„ä¼˜åŒ–è®¡åˆ’å¯ä»¥æŸ¥çœ‹ [`FUTURE_OPTIMIZATION_ROADMAP.md`](FUTURE_OPTIMIZATION_ROADMAP.md)ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- **å½“å‰åˆ†æ”¯**: foobar2000-plugin (æ™ºèƒ½ç¼“å†²æµå¼å¤„ç†)
- **ä¸»çº¿åˆ†æ”¯**: early-version (é€šç”¨é«˜ç²¾åº¦ç‰ˆæœ¬)
- **å‚è€ƒå®ç°**: foobar2000 DR Meter (foo_dr_meteræ’ä»¶)
- **å®˜æ–¹ä¸»é¡µ**: https://foobar.hyv.fi/?view=foo_dr_meter
- **åŸä½œè€…**: Janne HyvÃ¤rinen
- **SDKé›†æˆè®¡åˆ’**: [foobar2000 SDKé›†æˆè®¡åˆ’æ–‡æ¡£](docs/FOOBAR2000_SDK_INTEGRATION_PLAN.md)

## ğŸŒ¿ åˆ†æ”¯å·®å¼‚è¯´æ˜

### foobar2000-pluginåˆ†æ”¯ vs early-versionåˆ†æ”¯

| ç‰¹æ€§ | foobar2000-plugin | early-version |
|-----|-------------------|---------------|
| **ä¸»è¦ç›®æ ‡** | ä¸foobar2000å®Œå…¨å…¼å®¹ | é€šç”¨é«˜ç²¾åº¦DRåˆ†æ |
| **é»˜è®¤å¤„ç†æ¨¡å¼** | æ™ºèƒ½ç¼“å†²æµå¼å¤„ç† | æ™ºèƒ½å†…å­˜ç®¡ç† |
| **æ¶æ„è®¾è®¡** | åŒ…çº§è§£ç +çª—å£çº§ç®—æ³• | 3ç§’æ ‡å‡†å— |
| **å†…å­˜ç®¡ç†** | æ’å®š20MBç¼“å†² | æ™ºèƒ½ç­–ç•¥é€‰æ‹© |
| **å‚æ•°å¤æ‚åº¦** | ç®€åŒ–ï¼ˆ4ä¸ªä¸»è¦é€‰é¡¹ï¼‰ | å®Œæ•´ï¼ˆ8+é€‰é¡¹ï¼‰ |
| **ç²¾åº¦å¯¹é½ç›®æ ‡** | foobar2000 DR Meter | é€šç”¨DRæ ‡å‡† |
| **é€‚ç”¨åœºæ™¯** | foobar2000ç”¨æˆ·è¿ç§» | é€šç”¨DRåˆ†æå·¥å…· |

### é€‰æ‹©å»ºè®®

- **é€‰æ‹© foobar2000-plugin**: å¦‚æœä½ æ˜¯foobar2000ç”¨æˆ·ï¼Œå¸Œæœ›è·å¾—ä¸åŸç‰ˆå®Œå…¨ç›¸åŒçš„ç»“æœ
- **é€‰æ‹© early-version**: å¦‚æœä½ éœ€è¦é€šç”¨çš„DRåˆ†æå·¥å…·ï¼Œæ”¯æŒæ›´å¤šé…ç½®é€‰é¡¹

---

## âš ï¸ å…è´£å£°æ˜

æœ¬é¡¹ç›®ä»…ä¾›æŠ€æœ¯ç ”ç©¶å’Œå­¦ä¹ ä½¿ç”¨ã€‚æ‰€æœ‰é€†å‘å·¥ç¨‹æ´»åŠ¨å‡ç¬¦åˆç›¸å…³æ³•å¾‹æ³•è§„ã€‚å¦‚æœ‰æ³•å¾‹ç–‘é—®ï¼Œå»ºè®®å’¨è¯¢ä¸“ä¸šå¾‹å¸ˆã€‚

**ä¸ºä¸“ä¸šéŸ³é¢‘åˆ¶ä½œè€Œç”Ÿ | Built for Professional Audio Production**